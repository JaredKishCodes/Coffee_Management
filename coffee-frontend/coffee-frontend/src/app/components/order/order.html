<div class="pt-20 overflow-x-auto rounded-box border border-base-content/5 bg-amber-950 text-amber-50 shadow-lg ">
  <table class="table ">
    <thead class="text-amber-50">
      <tr>
        <th>Customer</th>
        <th>Order Date</th>
        <th>Order Status</th>
        <th>Coffee Items</th>
        <th>Total Net Amount</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      @for (order of orders; track $index) {
      <tr>
        <td>{{ order.customerName }}</td>
        <td>{{ order.orderDate }}</td>
        <td> <button class="p-2.5 rounded-2xl" [ngClass]="{
                    'bg-green-300 text-green-900 font-medium': order.orderStatus === 2,  
                    'bg-blue-300 text-blue-900 font-medium': order.orderStatus === 1, 
                    'bg-red-300 text-red-900 font-medium': order.orderStatus === 3,  
                
                    'bg-amber-200 text-amber-950': order.orderStatus !== 1
                     }">{{ OrderStatus[order.orderStatus] }}</button></td>
        <td>
          <ul>
            @for (item of order.orderItems; track $index) {
            <li   >{{ item.quantity }} x {{ item.coffeeName }} (â‚±{{ item.unitPrice }})</li>
            }
          </ul>
        </td>
        <td class="text-amber-400" readonly >{{ order.totalPrice }}</td>
        <td class="flex space-x-3">
          <!-- Delete icon -->
          <span (click)="deleteOrder(order.id)" class="p-1 rounded-lg cursor-pointer text-red-500 transition duration-200 
           hover:bg-red-100 hover:scale-110 active:scale-95 active:bg-red-200">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
              stroke="currentColor" class="size-5">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
            </svg>
          </span>

          <!-- Edit icon -->
          <span (click)="openEditModal(order)" class="p-1 rounded-lg cursor-pointer text-blue-500 transition duration-200 
           hover:bg-blue-100 hover:scale-110 active:scale-95 active:bg-blue-200">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
              stroke="currentColor" class="size-5">
              <path stroke-linecap="round" stroke-linejoin="round"
                d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125" />
            </svg>
          </span>
        </td>

      </tr>
      }


    </tbody>
  </table>
</div>

<dialog id="my_modal_2" class="modal">
  <div class="modal-box">
    <h3 class="text-lg font-bold">Edit Order</h3>

    <form class="grid grid-cols-2 gap-4 pt-5 max-w-md">

      <!-- Customer Name -->
      <div class="flex flex-col col-span-2">
        <label for="name" class="mb-1 font-medium text-gray-700">Customer Name</label>
        <input id="name" type="text" placeholder="Enter coffee name" class="input input-bordered w-full" name="name"
          [(ngModel)]="orderObj.customerName" />
      </div>


      <!-- Stock -->
      <div class="flex flex-col">
        <label for="orderdedDate" class="mb-1 font-medium text-gray-700">Ordered Date</label>
        <input id="orderdedDate" type="datetime-local" placeholder="Enter ordered date" class="input input-bordered w-full"
          name="orderdedDate" [(ngModel)]="orderObj.orderDate" />
      </div>

      <div class="form-control">
        <label class="mb-1 font-medium text-gray-700">Order Status</label>
        <select [(ngModel)]="orderObj.orderStatus" name="orderStatus"
                class="select select-bordered" required>
          <option [ngValue]="0">Pending</option>
          <option [ngValue]="1">Processing</option>
          <option [ngValue]="2">Completed</option>
          <option [ngValue]="3">Cancelled</option>
        </select>
      </div>

     

      <!-- Order Items -->
      <div class="form-control mt-4">
        <label class="label">Order Items</label>
        <table class="table w-full">
          <thead>
            <tr>
              <th>Item ID</th>
              <th>Quantity</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of orderObj.orderItems; let i = index">
              <td>{{ item.coffeeName }}</td>
              <td>
                <input type="number"
                       [(ngModel)]="orderObj.orderItems[i].quantity"
                       name="quantity{{i}}"
                       class="input input-bordered w-24" />
              </td>
            </tr>
          </tbody>
        </table>
      </div>

  
      <!-- Submit Button -->
      <div class="col-span-2">
        <button (click)="updateOrder()" type="submit" class="btn btn-success w-full">Update Coffee</button>
      </div>
    </form>
  </div>

  <form method="dialog" class="modal-backdrop">
    <button>close</button>
  </form>
</dialog>